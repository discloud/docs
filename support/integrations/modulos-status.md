---
description: Module to read metrics from the modern Linux container cgroup
---

# Module Status

![](https://gblobscdn.gitbook.com/assets%2F-LmveSmUr3rXxq5cvnW5%2F-Lta0svQ7bxcnUv5TpPv%2F-Lta2errpYYWP77G0dGd%2Fimage.png?alt=media&token=72171819-d3e6-4850-9821-1c6cc5037a1c)

## Information <a id="information"></a>

The limit of memory defined in the containers is imposed via cgroups, and most Linux tools that provide metrics of system resources were created even before the existence of cgroups \(for example: free or top\).

They often read memory metrics from the file system:`/proc/meminfo`, `/proc/vmstat`, `/proc/PID/smaps` and others. This means that they are not aware of cgroup. They will always display the memory numbers of the host system \(physical or virtual machine\) as a whole, which is useless for modern Linux containers.

This Nodejs module works only on Linux, and was created exclusively to serve users of [discloudbot.com](https://discloudbot.com/)‚Äã

The information provided by the module is generated by the [cgroups](https://www.kernel.org/doc/Documentation/cgroup-v1/) in the path `/sys/fs/cgroup/`

{% tabs %}
{% tab title="üì¶Javascript" %}
### Module installation <a id="module-installation"></a>

```text
$ npm install discloud-status
```

### Form of use in JS <a id="form-of-use-in-js"></a>

```text
const discloud = require("discloud-status");

// returns usage / total RAM
let r = discloud.ram();
console.log(r) // 100/1024MB

// RAM usage data
let ur = discloud.usoRam();
console.log(ur) // 100MB

// total RAM data available
let tr = discloud.totalRam();
console.log(tr) //1GB
```

[https://www.npmjs.com/package/discloud-status](https://www.npmjs.com/package/discloud-status)
{% endtab %}

{% tab title=" üêçPython" %}
### Module installation <a id="module-installation"></a>

```text
$ pip install discloud
```

### Form of use in Python

```text
import discloud

# returns usage / total RAM
r = discloud.ram()
print(r) # 100/1024MB

# RAM usage data
ur = discloud.using_ram()
print(ur) # 100MB

# total RAM data available
tr = discloud.total_ram()
print(tr) # 1GB
```

[https://pypi.org/project/discloud/](https://pypi.org/project/discloud/)‚Äã
{% endtab %}

{% tab title="‚òïJava" %}
```text
package util;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.text.CharacterIterator;
import java.text.StringCharacterIterator;


public class discloudStatus {
	
	
	public static String convertMB(long bytes) {
		/**
	     *  convert kb to mb/gb/tb/...
	     */
	    long absB = bytes == Long.MIN_VALUE ? Long.MAX_VALUE : Math.abs(bytes);
	    if (absB < 1024) {
	        return bytes + " B";
	    }
	    long value = absB;
	    CharacterIterator ci = new StringCharacterIterator("KMGTPE");
	    for (int i = 40; i >= 0 && absB > 0xfffccccccccccccL >> i; i -= 10) {
	        value >>= 10;
	        ci.next();
	    }
	    value *= Long.signum(bytes);
	    return String.format("%.1f %ciB", value / 1024.0, ci.current());
	}
	
	public static File file_total(){
		/**
	     * convert localization to file
	     * (/sys/fs/cgroup/memory/memory.max_usage_in_bytes)
	     */
		return new File(File.separator+"sys"+File.separator+"fs"+File.separator+"cgroup"+File.separator+"memory"+File.separator+"memory.limit_in_bytes");
	}
	
	public static File file_used() {
		/**
	     * convert localization to file
	     * (/sys/fs/cgroup/memory/memory.limit_in_bytes)
	     */
		return new File(File.separator+"sys"+File.separator+"fs"+File.separator+"cgroup"+File.separator+"memory"+File.separator+"memory.max_usage_in_bytes");
	}
	
	@SuppressWarnings("resource")
	public static int total_ram() throws NumberFormatException, FileNotFoundException, IOException {
		/**
	     * get total space memory ram
	     */
		return Integer.parseInt(new BufferedReader(new FileReader(file_total())).readLine());
	}
	
	@SuppressWarnings("resource")
	public static int total_used() throws NumberFormatException, FileNotFoundException, IOException {
		/**
	     * get total memory used
	     */
		return Integer.parseInt(new BufferedReader(new FileReader(file_used())).readLine());
	}
	
	

	
	public static String ram() throws NumberFormatException, FileNotFoundException, IOException {
		/**
	     *  get memory ram converted to MB!
	     *  return (memoryused/memorytotal)
	     */
		return "("+convertMB(total_used())+"/"+convertMB(total_ram())+")";
	}
}
```
{% endtab %}
{% endtabs %}

‚Äã

